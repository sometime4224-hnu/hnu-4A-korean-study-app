<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국어 추론 학습</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
        }
        .quiz-card {
            background-color: white;
            border-radius: 16px;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        .quiz-title {
            cursor: pointer;
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        .quiz-title:hover {
            background-color: #f9fafb;
        }
        .quiz-title.active {
             border-bottom: 1px solid #e5e7eb;
        }
        .title-arrow {
            transition: transform 0.3s ease-in-out;
        }
        .quiz-title.active .title-arrow {
            transform: rotate(180deg);
        }
        .quiz-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out;
            padding: 0 28px;
        }
        .quiz-content.active {
            max-height: 1000px; /* A large enough value to show all content */
            padding: 24px 28px;
        }
        .blank-space {
            cursor: pointer;
            color: #4f46e5;
            font-weight: 700;
            text-decoration: underline;
            text-underline-offset: 4px;
            transition: background-color 0.2s;
        }
        .blank-space:hover {
            background-color: #e0e7ff;
        }
        .filled-blank {
            color: #1e40af;
            font-weight: 700;
            background-color: #e0e7ff;
            padding: 2px 6px;
            border-radius: 4px;
        }
        #options-modal {
            display: none;
        }
        .option-item {
            padding: 14px 18px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            background-color: white;
        }
        .option-item:hover {
            background-color: #f3f4f6;
            border-color: #6366f1;
        }
        .option-item.correct-feedback {
            background-color: #dcfce7 !important;
            border-color: #22c55e !important;
        }
        .option-item.incorrect-feedback {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="w-full max-w-4xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800">문장 추론 연습</h1>
            <p class="text-gray-600 mt-3">지문 제목을 클릭하여 문제를 풀어보세요. 진행 상황은 자동으로 저장됩니다.</p>
        </header>

        <main id="quiz-container">
            <!-- Quiz content will be dynamically inserted here -->
        </main>
    </div>
    
    <!-- Options Modal -->
    <div id="options-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg">
            <div id="options-content" class="p-6 space-y-3">
                <!-- Options will be inserted here -->
            </div>
        </div>
    </div>

    <script type="module">
        const LOCAL_STORAGE_KEY = 'korean-inference-progress';

        const quizData = [
            // ... (quiz data from previous version) ...
            {
                title: "1번 지문 (질문)",
                content: [
                    { type: 'text', value: '저는 중국어를 전공하고 있는 학생입니다. 이제 곧 졸업을 앞두고 있는데 어떤 직업을 선택하는 것이 ' },
                    { 
                        type: 'blank', id: 1, answer: '좋을지 몰라서',
                        options: ['좋을지 몰라서', '너무 쉬워서', '이미 정해서', '관심이 없어서']
                    },
                    { type: 'text', value: ' 질문을 드립니다. 저는 여행하는 것을 좋아하고 ' },
                    { 
                        type: 'blank', id: 2, answer: '성격이 활발하고 사교적이라서',
                        options: ['조용하고 내성적이지만', '성격이 활발하고 사교적이라서', '혼자 있는 것을 좋아해서', '가끔 화를 내는 편이라서']
                    },
                    { type: 'text', value: ' 처음 보는 사람과도 잘 어울리는 편입니다. 또 다른 사람을 도와주는 일을 할 때 ' },
                    { 
                        type: 'blank', id: 3, answer: '보람을 느낍니다',
                        options: ['보람을 느낍니다', '스트레스를 받습니다', '큰 감흥이 없습니다', '돈을 벌 수 있습니다']
                    },
                    { type: 'text', value: '. 제 전공도 살리면서 적성에 맞는 직업이 없을까요?' }
                ]
            },
            {
                title: "2번 지문 (답변)",
                content: [
                    { type: 'text', value: '답변 학생에게는 여행 상품을 기획하는 여행사 직원이나 직접 여행객을 도와주는 ' },
                    { type: 'blank', id: 4, answer: '여행 가이드', options: ['컴퓨터 프로그래머', '회계사', '여행 가이드', '연구원'] },
                    { type: 'text', value: '와 같은 직업이 잘 어울릴 것 같습니다. 여행 관련 직업은 서비스업이기 때문에 밝고 ' },
                    { type: 'blank', id: 5, answer: '적극적인 성격', options: ['신중한 성격', '예민한 성격', '적극적인 성격', '무뚝뚝한 성격'] },
                    { type: 'text', value: '의 사람에게 잘 맞습니다. 여행사 업무에서는 외국어 능력도 꼭 필요하니까 지금 하는 전공 공부를 ' },
                    { type: 'blank', id: 6, answer: '열심히 하다 보면', options: ['그만두게 되면', '열심히 하다 보면', '조금만 해보면', '포기하게 되면'] },
                    { type: 'text', value: ' 나중에 좋은 여행사에서 일할 수 있을 것입니다. 또는 항공사에서 근무하는 것도 좋을 것 같습니다. 비행기 안에서 ' },
                    { type: 'blank', id: 7, answer: '승객을 도와주는', options: ['비행기를 조종하는', '음식을 판매하는', '공항을 설계하는', '승객을 도와주는'] },
                    { type: 'text', value: ' 승무원이나 공항에서 일을 하는 항공사 직원에 대해서도 생각해보시길 바랍니다. 항공사에서 근무할 때 좋은 점 중의 하나는 외국 여행을 할 기회가 많다는 것입니다. 학생은 외국어 실력도 있고 여행을 좋아하니까 '},
                    { type: 'blank', id: 8, answer: '적성에 잘 맞을', options: ['조금 힘들', '다소 지루할', '적성에 잘 맞을', '연봉이 높을'] },
                    { type: 'text', value: ' 것 같습니다.' }
                ]
            },
            {
                title: "3번 지문 (건강 관리)",
                content: [
                    { type: 'text', value: '건강한 삶을 살기 위해서는 음주와 흡연을 하지 않아야 한다. 먼저 ' },
                    { type: 'blank', id: 9, answer: '음주를 하면', options: ['음주를 하면', '운동을 하면', '일찍 잠을 자면', '채소를 많이 먹으면'] },
                    { type: 'text', value: ' 건강이 나빠질 수 있다. 음주는 간 건강에 안 ' },
                    { type: 'blank', id: 10, answer: '좋을 뿐만 아니라', options: ['좋을 뿐만 아니라', '나쁘기 때문에', '아무 영향이 없고', '도움이 되지만'] },
                    { type: 'text', value: ' 뇌에도 안 좋은 영향을 줄 수 있다. 흡연도 건강에 아주 좋지 않다. 담배를 많이 ' },
                    { type: 'blank', id: 11, answer: '피우면', options: ['피우면', '만들면', '버리면', '숨기면'] },
                    { type: 'text', value: ' 폐암, 기도암, 위장암 등이 생길 수도 있다. 흡연은 자신의 건강에도 안 좋을 뿐 아니라 내 가족, 이웃까지 병들게 한다.' }
                ]
            },
            {
                title: "4번 지문 (응급 처치)",
                content: [
                    { type: 'text', value: '질문: 걷거나 뛰다가 넘어지면서 발목을 ' },
                    { type: 'blank', id: 12, answer: '삐는', options: ['삐는', '씻는', '마사지하는', '보호하는'] },
                    { type: 'text', value: ' 경우가 가끔 있습니다. \'금방 괜찮아지겠지?\' 하고 치료하지 않고 지내다가는 ' },
                    { type: 'blank', id: 13, answer: '증상이', options: ['치료가', '병원이', '증상이', '약효가'] },
                    { type: 'text', value: ' 심해질 수 있습니다. 발목을 삐었을 때 어떻게 치료하는 것이 좋을까요? 답변: 다친 부분이 붓거나 ' },
                    { type: 'blank', id: 14, answer: '멍이 들었는지', options: ['상처가 났는지', '피가 나는지', '멍이 들었는지', '뼈가 보일지'] },
                    { type: 'text', value: ' 확인하고 손가락으로 눌러 봅니다. 필요한 경우 뼈를 다치지 않았는지 ' },
                    { type: 'blank', id: 15, answer: '엑스레이', options: ['혈액', '소변', '초음파', '엑스레이'] },
                    { type: 'text', value: ' 검사를 하기도 합니다. 발목이 움직이지 않도록 부어 있는 발목에 ' },
                    { type: 'blank', id: 16, answer: '붕대를 감거나', options: ['연고를 바르거나', '붕대를 감거나', '파스를 붙이거나', '주사를 놓거나'] },
                    { type: 'text', value: ' 심할 경우 ' },
                    { type: 'blank', id: 17, answer: '깁스', options: ['수술', '입원', '깁스', '물리치료'] },
                    { type: 'text', value: '를 합니다.' }
                ]
            },
            {
                title: "5번 지문 (대전 월드컵 경기장 소개)",
                content: [
                    { type: 'text', value: '여기는 ' },
                    { type: 'blank', id: 18, answer: '대전월드컵경기장이라는', options: ['대전월드컵경기장이라는', '옛날에 지어졌다는', '아무도 모르는', '새로 문을 닫은'] },
                    { type: 'text', value: ' 곳이다. 이곳은 다른 축구장에 비해 바닥이 잘되어 있고 쉴 곳도 많아서 ' },
                    { type: 'blank', id: 19, answer: '사람들이 많이 찾는다', options: ['사람들이 많이 찾는다', '선수들만 이용한다', '입장료가 아주 비싸다', '아무도 가지 않는다'] },
                    { type: 'text', value: '. 이곳에 가면 운동 경기를 ' },
                    { type: 'blank', id: 20, answer: '관람할 수 있고', options: ['관람할 수 있고', '직접 할 수는 없고', '예약해야만 하고', '응원할 수 없고'] },
                    { type: 'text', value: ' 경기장 내에 있는 영화관에서 영화도 볼 수 있고 근처 공원에서 산책도 할 수 있다.' }
                ]
            },
            {
                title: "6번 지문 (풋살)",
                content: [
                    { type: 'text', value: '풋살은 실내에서 즐기는 축소된 형태의 축구로, 스페인어 \'Futbol\'과 프랑스어 \'Salle\'를 합쳐 만든 이름입니다. 축구는 11명이 넓은 경기장에서 ' },
                    { type: 'blank', id: 21, answer: '경기하지만', options: ['경기하지만', '훈련하지만', '휴식하지만', '퇴장하지만'] },
                    { type: 'text', value: ', 풋살은 5명의 선수가 작은 실내 경기장에서 진행되며 경기 시간도 20분으로 ' },
                    { type: 'blank', id: 22, answer: '짧습니다', options: ['짧습니다', '깁니다', '복잡합니다', '정해져 있지 않습니다'] },
                    { type: 'text', value: '. 이처럼 풋살의 장점은 아무 데서나 쉽게 ' },
                    { type: 'blank', id: 23, answer: '할 수 있다는 점입니다', options: ['할 수 있다는 점입니다', '배우기 어렵다는 것입니다', '선수가 많아야 한다는 점입니다', '장비가 비싸다는 점입니다'] },
                    { type: 'text', value: '. 공을 발로 차서 상대 골문에 넣는 기본 규칙은 축구와 같지만, 적은 인원과 좁은 공간 덕분에 누구나 쉽게 참여할 수 있고 빠른 진행 속도로 매우 ' },
                    { type: 'blank', id: 24, answer: '흥미진진한', options: ['단조로운', '지루한', '위험한', '흥미진진한'] },
                    { type: 'text', value: ' 경기를 즐길 수 있다는 점이 풋살의 가장 큰 장점입니다.' }
                ]
            },
            {
                title: "7번 지문 (거울로 본 자신의 모습)",
                content: [
                    { type: 'text', value: '여자는 거울을 볼 때 실제보다 자신이 뚱뚱하다고 생각하는 ' },
                    { type: 'blank', id: 25, answer: '반면에', options: ['반면에', '때문에', '덕분에', '비해서'] },
                    { type: 'text', value: ' 남자는 대부분 자신이 남자답고 ' },
                    { type: 'blank', id: 26, answer: '멋있다고', options: ['멋있다고', '부족하다고', '이상하다고', '평범하다고'] },
                    { type: 'text', value: ' 생각한다. 그래서 여자가 남자에 비해서 ' },
                    { type: 'blank', id: 27, answer: '몸매나 다이어트에', options: ['몸매나 다이어트에', '공부나 시험에', '가족이나 친구에', '음식이나 요리에'] },
                    { type: 'text', value: ' 관심이 많을 수밖에 없다.' }
                ]
            },
            {
                title: "8번 지문 (옷에 대한 생각)",
                content: [
                    { type: 'text', value: '여자는 옷장에 옷이 많이 있어도 입을 옷이 없다고 ' },
                    { type: 'blank', id: 28, answer: '생각하는 반면에', options: ['생각하는 반면에', '이야기하기 때문에', '걱정하는 대신에', '주장하는 것처럼'] },
                    { type: 'text', value: ' 남자는 옷이 몇 벌만 있어도 ' },
                    { type: 'blank', id: 29, answer: '충분하다고', options: ['부족하다고', '불편하다고', '충분하다고', '유행이 지났다고'] },
                    { type: 'text', value: ' 생각한다. 여자는 옷을 멋으로 입지만 남자는 옷의 기능만 생각하기 때문에 ' },
                    { type: 'blank', id: 30, answer: '그럴 수밖에 없다', options: ['이해가 되지 않는다', '그럴 리가 없다', '별 차이가 없다', '그럴 수밖에 없다'] },
                    { type: 'text', value: '.' }
                ]
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const optionsModal = document.getElementById('options-modal');
        const optionsContent = document.getElementById('options-content');

        function renderQuiz() {
            quizData.forEach((quiz, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';

                let contentHTML = `
                    <div class="quiz-title" data-target="quiz-content-${index}">
                        <h2 class="text-2xl font-bold text-gray-800">${quiz.title}</h2>
                        <svg class="title-arrow w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div class="quiz-content" id="quiz-content-${index}">
                        <p class="text-lg leading-loose">
                `;

                quiz.content.forEach(item => {
                    if (item.type === 'text') {
                        contentHTML += item.value;
                    } else if (item.type === 'blank') {
                        contentHTML += `<span class="blank-space" data-blank-id="${item.id}">( 빈칸 )</span>`;
                    }
                });
                contentHTML += `</p></div>`;
                card.innerHTML = contentHTML;
                quizContainer.appendChild(card);
            });
        }
        
        function saveProgress(solvedId) {
            const savedData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY) || '[]');
            if (!savedData.includes(solvedId)) {
                savedData.push(solvedId);
                localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(savedData));
            }
        }

        function loadProgress() {
            const savedData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY) || '[]');
            savedData.forEach(solvedId => {
                const blankEl = document.querySelector(`.blank-space[data-blank-id='${solvedId}']`);
                const blankData = quizData.flatMap(q => q.content).find(c => c.id == solvedId);
                if (blankEl && blankData) {
                    const filledEl = document.createElement('span');
                    filledEl.className = 'filled-blank';
                    filledEl.textContent = blankData.answer;
                    blankEl.replaceWith(filledEl);
                }
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function addEventListeners() {
            document.querySelectorAll('.quiz-title').forEach(title => {
                title.addEventListener('click', () => {
                    title.classList.toggle('active');
                    const content = document.getElementById(title.dataset.target);
                    content.classList.toggle('active');
                });
            });

            document.querySelectorAll('.blank-space').forEach(blank => {
                blank.addEventListener('click', (e) => {
                    const blankId = e.target.dataset.blankId;
                    const blankData = quizData.flatMap(q => q.content).find(c => c.id == blankId);
                    
                    if (!blankData) return;

                    const shuffledOptions = shuffleArray([...blankData.options]);
                    
                    optionsContent.innerHTML = '';
                    shuffledOptions.forEach(optionText => {
                        const optionEl = document.createElement('div');
                        optionEl.className = 'option-item';
                        optionEl.textContent = optionText;
                        optionEl.addEventListener('click', () => handleOptionSelect(optionText, blankData, e.target));
                        optionsContent.appendChild(optionEl);
                    });
                    
                    optionsModal.style.display = 'flex';
                });
            });
            
            optionsModal.addEventListener('click', (e) => {
                if (e.target === optionsModal) {
                    optionsModal.style.display = 'none';
                }
            });
        }

        function handleOptionSelect(selectedText, blankData, blankEl) {
            const isCorrect = selectedText === blankData.answer;
            const selectedOptionEl = Array.from(optionsContent.children).find(child => child.textContent === selectedText);

            if (isCorrect) {
                selectedOptionEl.classList.add('correct-feedback');
                saveProgress(blankData.id);
                setTimeout(() => {
                    const filledEl = document.createElement('span');
                    filledEl.className = 'filled-blank';
                    filledEl.textContent = blankData.answer;
                    blankEl.replaceWith(filledEl);
                    optionsModal.style.display = 'none';
                }, 800);
            } else {
                selectedOptionEl.classList.add('incorrect-feedback');
                setTimeout(() => {
                     selectedOptionEl.classList.remove('incorrect-feedback');
                }, 800);
            }
        }

        function init() {
            renderQuiz();
            loadProgress();
            addEventListeners();
        }

        init();
    </script>
</body>
</html>

