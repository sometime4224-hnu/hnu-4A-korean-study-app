<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ì–´íœ˜ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            overscroll-behavior: none; /* ìŠ¤í¬ë¡¤ ë‹¹ê¹€ íš¨ê³¼ ì œê±° */
        }
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” (ê²°ê³¼ ì°½ìš©) */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #c5c5c5;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- ì‚¬ìš©ì ì´ë¦„ ì…ë ¥ í™”ë©´ -->
    <div id="login-screen" class="w-full max-w-md mx-auto bg-white p-8 rounded-2xl shadow-xl">
        <h2 class="text-3xl font-bold text-center text-blue-700 mb-6">í•œêµ­ì–´ ì–´íœ˜ í€´ì¦ˆ</h2>
        <p class="text-center text-gray-600 mb-8">í€´ì¦ˆ ê¸°ë¡ì„ ì €ì¥í•  ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
        <div class="mb-4">
            <label for="user-name-input" class="block text-sm font-medium text-gray-700 mb-2">ì´ë¦„</label>
            <input type="text" id="user-name-input" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ì´ë¦„ (2ê¸€ì ì´ìƒ)">
        </div>
        <button id="login-button" class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-lg">
            í€´ì¦ˆ ì‹œì‘í•˜ê¸°
        </button>
    </div>

    <!-- í€´ì¦ˆ ë©”ì¸ í™”ë©´ (ì²˜ìŒì—ëŠ” ìˆ¨ê¹€) -->
    <div id="quiz-container" class="hidden w-full max-w-4xl mx-auto flex flex-col md:flex-row gap-6">
        <!-- í€´ì¦ˆ ì˜ì—­ -->
        <div class="w-full md:w-2/3 bg-white p-6 md:p-8 rounded-2xl shadow-xl transition-all duration-300">
            
            <!-- í€´ì¦ˆ ì§„í–‰ í™”ë©´ -->
            <div id="quiz-progress-screen">
                <h2 id="user-greeting" class="text-xl font-semibold text-gray-700 mb-6"></h2>
                
                <!-- ì§ˆë¬¸ í‘œì‹œ -->
                <div id="question-container" class="mb-6 min-h-[100px]">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-lg font-semibold text-gray-700">ë¬¸ì œ <span id="question-number">1</span> / <span id="total-questions">16</span></span>
                        <!-- 'question-word'ë¥¼ í‘œì‹œí•˜ë˜ spanì„ ìˆ¨ê¹€ ì²˜ë¦¬ (hidden í´ë˜ìŠ¤ ì¶”ê°€) -->
                        <span id="question-word" class="hidden text-xl md:text-2xl font-bold text-blue-700 bg-blue-50 p-2 rounded-lg"></span>
                    </div>
                    <p id="question-text" class="text-lg md:text-xl text-gray-800 leading-relaxed"></p>
                </div>

                <!-- ì„ íƒì§€ ë²„íŠ¼ -->
                <div id="options-container" class="grid grid-cols-1 gap-4 mb-6">
                    <!-- JavaScriptë¡œ ë²„íŠ¼ ìƒì„± -->
                </div>

                <!-- ì œì¶œ ë²„íŠ¼ -->
                <button id="submit-btn" class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-lg disabled:bg-gray-400">
                    ì±„ì í•˜ê¸°
                </button>
            </div>

            <!-- í€´ì¦ˆ ê²°ê³¼ í™”ë©´ -->
            <div id="result-screen" class="hidden">
                <h2 class="text-3xl font-bold text-center text-blue-800 mb-4">í€´ì¦ˆ ê²°ê³¼</h2>
                <p id="score-text" class="text-5xl font-bold text-center text-gray-800 mb-6">100ì </p>
                <div id="feedback-container" class="space-y-4 mb-6 max-h-60 overflow-y-auto custom-scrollbar p-4 bg-gray-50 rounded-lg">
                    <!-- í”¼ë“œë°± ë‚´ìš© -->
                </div>
                <div class="flex gap-4">
                    <button id="retry-btn" class="flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300">
                        ë‹¤ì‹œ í’€ê¸°
                    </button>
                    <button id="next-btn" class="flex-1 bg-gray-700 text-white px-4 py-3 rounded-lg font-semibold hover:bg-gray-800 transition duration-300">
                        ë‹¤ìŒ ë¬¸ì œ
                    </button>
                </div>
            </div>

        </div>

        <!-- ì´ì „ ê²°ê³¼ ì˜ì—­ -->
        <div id="prev-results-container" class="w-full md:w-1/3 bg-white p-6 md:p-8 rounded-2xl shadow-xl">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-3">ì´ì „ í€´ì¦ˆ ê¸°ë¡</h3>
            <div id="prev-results-list" class="space-y-4 max-h-[400px] overflow-y-auto custom-scrollbar pr-2">
                <!-- ì´ì „ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
                <p id="no-results-text" class="text-gray-500">ì•„ì§ í€´ì¦ˆ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>

    <!-- ë§ì¶¤í˜• ì•Œë¦¼/ëª¨ë‹¬ ì°½ -->
    <div id="custom-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-sm text-center">
            <p id="modal-message" class="text-lg text-gray-800 mb-6"></p>
            <button id="modal-close-btn" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition duration-300">
                í™•ì¸
            </button>
        </div>
    </div>

    <script>
        // í€´ì¦ˆ ë°ì´í„° (ì†ë‹´ ë° ê´€ìš©ì–´)
        const quizData = [
            // --- ì†ë‹´ (Proverbs) ---
            {
                word: "ì½© ì‹¬ì€ ë° ì½© ë‚œë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì½© ì‹¬ì€ ë° ì½© ë‚œë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ì—´ì‹¬íˆ ê³µë¶€í–ˆë”ë‹ˆ ì‹œí—˜ì„ ì˜ ë´¤ì–´ìš”.", 
                    "ìì „ê±°ë¥¼ ìƒì–´ë²„ë¦° í›„ì— ìë¬¼ì‡ ë¥¼ ìƒ€ì–´ìš”.", 
                    "ìš”ë¦¬ì‚¬ê°€ ìš”ë¦¬í•˜ë‹¤ê°€ ìŒì‹ì„ íƒœì› ì–´ìš”.", 
                    "ì—„ë§ˆì™€ ì•„ë¹ ê°€ ì‹¸ìš°ëŠ”ë° ë‚˜ë§Œ í˜¼ë‚¬ì–´ìš”."
                ],
                answer: "ì—´ì‹¬íˆ ê³µë¶€í–ˆë”ë‹ˆ ì‹œí—˜ì„ ì˜ ë´¤ì–´ìš”.",
                feedback: "'ì½© ì‹¬ì€ ë° ì½© ë‚œë‹¤'ëŠ” ì›ì¸ëŒ€ë¡œ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ì—´ì‹¬íˆ ë…¸ë ¥í–ˆìœ¼ë‹ˆ ì¢‹ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ ìƒí™©ì— ì”ë‹ˆë‹¤."
            },
            {
                word: "ê°œêµ¬ë¦¬ ì˜¬ì±™ì´ ì  ìƒê° ëª» í•œë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ê°œêµ¬ë¦¬ ì˜¬ì±™ì´ ì  ìƒê° ëª» í•œë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ë¶€ìê°€ ëœ í›„ì—, ê°€ë‚œí–ˆë˜ ë•Œë¥¼ ìŠê³  ë‹¤ë¥¸ ì‚¬ëŒì„ ë¬´ì‹œí•´ìš”.", 
                    "ì–´ë¦´ ë•Œë¶€í„° ì†í†±ì„ ë¬¼ì–´ëœ¯ì—ˆëŠ”ë°, ì–´ë¥¸ì´ ë˜ì–´ì„œë„ ê³ ì¹˜ê¸° ì–´ë ¤ì›Œìš”.", 
                    "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´ìš”.", 
                    "ìš”ë¦¬ì‚¬ê°€ ìš”ë¦¬í•˜ë‹¤ê°€ ìŒì‹ì„ íƒœì› ì–´ìš”."
                ],
                answer: "ë¶€ìê°€ ëœ í›„ì—, ê°€ë‚œí–ˆë˜ ë•Œë¥¼ ìŠê³  ë‹¤ë¥¸ ì‚¬ëŒì„ ë¬´ì‹œí•´ìš”.",
                feedback: "'ê°œêµ¬ë¦¬ ì˜¬ì±™ì´ ì  ìƒê° ëª» í•œë‹¤'ëŠ” ìì‹ ì´ ë¶€ì¡±í–ˆë˜ ì˜›ë‚ ì„ ìŠì–´ë²„ë¦¬ê³  ì˜ë‚œ ì²™í•˜ëŠ” ìƒí™©ì— ì”ë‹ˆë‹¤."
            },
            {
                word: "ì†Œ ìƒê³  ì™¸ì–‘ê°„ ê³ ì¹œë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì†Œ ìƒê³  ì™¸ì–‘ê°„ ê³ ì¹œë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ìì „ê±°ë¥¼ ìƒì–´ë²„ë¦° í›„ì— ìë¬¼ì‡ ë¥¼ ìƒ€ì–´ìš”.", 
                    "ì—´ì‹¬íˆ ê³µë¶€í–ˆë”ë‹ˆ ì‹œí—˜ì„ ì˜ ë´¤ì–´ìš”.", 
                    "íšŒì‚¬ì—ì„œ í˜¼ë‚˜ê³  ì§‘ì— ì™€ì„œ ë™ìƒì—ê²Œ í™”ë¥¼ ëƒˆì–´ìš”.", 
                    "ì—„ë§ˆì™€ ì•„ë¹ ê°€ ì‹¸ìš°ëŠ”ë° ë‚˜ë§Œ í˜¼ë‚¬ì–´ìš”."
                ],
                answer: "ìì „ê±°ë¥¼ ìƒì–´ë²„ë¦° í›„ì— ìë¬¼ì‡ ë¥¼ ìƒ€ì–´ìš”.",
                feedback: "'ì†Œ ìƒê³  ì™¸ì–‘ê°„ ê³ ì¹œë‹¤'ëŠ” ì¼ì´ ì´ë¯¸ ì˜ëª»ëœ í›„ì— ê³ ì¹˜ë ¤ê³  í•´ì„œ ì†Œìš©ì´ ì—†ëŠ” ìƒí™©ì— ì”ë‹ˆë‹¤."
            },
            {
                word: "ê³ ë˜ ì‹¸ì›€ì— ìƒˆìš° ë“± í„°ì§„ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ê³ ë˜ ì‹¸ì›€ì— ìƒˆìš° ë“± í„°ì§„ë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ì—„ë§ˆì™€ ì•„ë¹ ê°€ ì‹¸ìš°ëŠ”ë°, ì˜ëª» ì—†ëŠ” ë‚˜ë§Œ í˜¼ë‚¬ì–´ìš”.", 
                    "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´ìš”.", 
                    "ë¶€ìê°€ ëœ í›„ì—, ê°€ë‚œí–ˆë˜ ë•Œë¥¼ ìŠê³  ë‹¤ë¥¸ ì‚¬ëŒì„ ë¬´ì‹œí•´ìš”.", 
                    "ì—´ì‹¬íˆ ê³µë¶€í–ˆë”ë‹ˆ ì‹œí—˜ì„ ì˜ ë´¤ì–´ìš”."
                ],
                answer: "ì—„ë§ˆì™€ ì•„ë¹ ê°€ ì‹¸ìš°ëŠ”ë°, ì˜ëª» ì—†ëŠ” ë‚˜ë§Œ í˜¼ë‚¬ì–´ìš”.",
                feedback: "'ê³ ë˜ ì‹¸ì›€ì— ìƒˆìš° ë“± í„°ì§„ë‹¤'ëŠ” í˜ì´ ì„¼ ì‚¬ëŒë“¤ ì‹¸ì›€ì— ì•½í•œ ì‚¬ëŒì´ í”¼í•´ë¥¼ ë³´ëŠ” ìƒí™©ì— ì”ë‹ˆë‹¤."
            },
            {
                word: "ì„¸ ì‚´ ë²„ë¦‡ ì—¬ë“ ê¹Œì§€ ê°„ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì„¸ ì‚´ ë²„ë¦‡ ì—¬ë“ ê¹Œì§€ ê°„ë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ì–´ë¦´ ë•Œë¶€í„° ì†í†±ì„ ë¬¼ì–´ëœ¯ì—ˆëŠ”ë°, ì–´ë¥¸ì´ ë˜ì–´ì„œë„ ê³ ì¹˜ê¸° ì–´ë ¤ì›Œìš”.", 
                    "ìš”ë¦¬ì‚¬ê°€ ìš”ë¦¬í•˜ë‹¤ê°€ ìŒì‹ì„ íƒœì› ì–´ìš”.", 
                    "ìì „ê±°ë¥¼ ìƒì–´ë²„ë¦° í›„ì— ìë¬¼ì‡ ë¥¼ ìƒ€ì–´ìš”.", 
                    "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´ìš”."
                ],
                answer: "ì–´ë¦´ ë•Œë¶€í„° ì†í†±ì„ ë¬¼ì–´ëœ¯ì—ˆëŠ”ë°, ì–´ë¥¸ì´ ë˜ì–´ì„œë„ ê³ ì¹˜ê¸° ì–´ë ¤ì›Œìš”.",
                feedback: "'ì„¸ ì‚´ ë²„ë¦‡ ì—¬ë“ ê¹Œì§€ ê°„ë‹¤'ëŠ” ì–´ë¦´ ë•Œ ìƒê¸´ ë‚˜ìœ ìŠµê´€ì€ ê³ ì¹˜ê¸° ì–´ë µë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ë¯¿ëŠ” ë„ë¼ì— ë°œë“± ì°íŒë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ë¯¿ëŠ” ë„ë¼ì— ë°œë“± ì°íŒë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´ìš”.", 
                    "ì—„ë§ˆì™€ ì•„ë¹ ê°€ ì‹¸ìš°ëŠ”ë°, ì˜ëª» ì—†ëŠ” ë‚˜ë§Œ í˜¼ë‚¬ì–´ìš”.", 
                    "ì—´ì‹¬íˆ ê³µë¶€í–ˆë”ë‹ˆ ì‹œí—˜ì„ ì˜ ë´¤ì–´ìš”.", 
                    "ë¶€ìê°€ ëœ í›„ì—, ê°€ë‚œí–ˆë˜ ë•Œë¥¼ ìŠê³  ë‹¤ë¥¸ ì‚¬ëŒì„ ë¬´ì‹œí•´ìš”."
                ],
                answer: "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´ìš”.",
                feedback: "'ë¯¿ëŠ” ë„ë¼ì— ë°œë“± ì°íŒë‹¤'ëŠ” ë‚´ê°€ ë¯¿ì—ˆë˜ ì‚¬ëŒì—ê²Œ ë°°ì‹ ì„ ë‹¹í•œ ìƒí™©ì— ì”ë‹ˆë‹¤."
            },
            {
                word: "ì›ìˆ­ì´ë„ ë‚˜ë¬´ì—ì„œ ë–¨ì–´ì§„ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì›ìˆ­ì´ë„ ë‚˜ë¬´ì—ì„œ ë–¨ì–´ì§„ë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ë§¤ì¼ ìš”ë¦¬í•˜ëŠ” ìš”ë¦¬ì‚¬ê°€ ì˜¤ëŠ˜ ìŒì‹ì„ íƒœì› ì–´ìš”.", 
                    "ì–´ë¦´ ë•Œë¶€í„° ìƒê¸´ ë‚˜ìœ ìŠµê´€ì„ ê³ ì¹˜ê¸° ì–´ë ¤ì›Œìš”.", 
                    "ìì „ê±°ë¥¼ ìƒì–´ë²„ë¦° í›„ì— ìë¬¼ì‡ ë¥¼ ìƒ€ì–´ìš”.", 
                    "íšŒì‚¬ì—ì„œ í˜¼ë‚˜ê³  ì§‘ì— ì™€ì„œ ë™ìƒì—ê²Œ í™”ë¥¼ ëƒˆì–´ìš”."
                ],
                answer: "ë§¤ì¼ ìš”ë¦¬í•˜ëŠ” ìš”ë¦¬ì‚¬ê°€ ì˜¤ëŠ˜ ìŒì‹ì„ íƒœì› ì–´ìš”.",
                feedback: "'ì›ìˆ­ì´ë„ ë‚˜ë¬´ì—ì„œ ë–¨ì–´ì§„ë‹¤'ëŠ” ì•„ë¬´ë¦¬ ì˜í•˜ëŠ” ì‚¬ëŒë„ ì‹¤ìˆ˜í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ì¢…ë¡œì—ì„œ ëº¨ ë§ê³  í•œê°•ì—ì„œ í™”í’€ì´í•œë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì¢…ë¡œì—ì„œ ëº¨ ë§ê³  í•œê°•ì—ì„œ í™”í’€ì´í•œë‹¤' ì†ë‹´ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "íšŒì‚¬ì—ì„œ ìƒì‚¬ì—ê²Œ í˜¼ë‚˜ê³ , ì§‘ì— ì™€ì„œ ë™ìƒì—ê²Œ í™”ë¥¼ ëƒˆì–´ìš”.", 
                    "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´ìš”.", 
                    "ë¶€ìê°€ ëœ í›„ì—, ê°€ë‚œí–ˆë˜ ë•Œë¥¼ ìŠê³  ë‹¤ë¥¸ ì‚¬ëŒì„ ë¬´ì‹œí•´ìš”.", 
                    "ì—„ë§ˆì™€ ì•„ë¹ ê°€ ì‹¸ìš°ëŠ”ë°, ì˜ëª» ì—†ëŠ” ë‚˜ë§Œ í˜¼ë‚¬ì–´ìš”."
                ],
                answer: "íšŒì‚¬ì—ì„œ ìƒì‚¬ì—ê²Œ í˜¼ë‚˜ê³ , ì§‘ì— ì™€ì„œ ë™ìƒì—ê²Œ í™”ë¥¼ ëƒˆì–´ìš”.",
                feedback: "'ì¢…ë¡œì—ì„œ ëº¨ ë§ê³  í•œê°•ì—ì„œ í™”í’€ì´í•œë‹¤'ëŠ” ë‹¤ë¥¸ ê³³ì—ì„œ ìƒê¸´ í™”ë¥¼ ê´€ê³„ì—†ëŠ” ì‚¬ëŒì—ê²Œ í‘¸ëŠ” ìƒí™©ì— ì”ë‹ˆë‹¤."
            },

            // --- ê´€ìš©ì–´ (Idioms) ---
            {
                word: "ì†ì´ ëª¨ìë¼ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì†ì´ ëª¨ìë¼ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ì‹ë‹¹ì— ì†ë‹˜ì´ ë„ˆë¬´ ë§ì•„ì„œ ì¼í•  ì‚¬ëŒì´ ë” í•„ìš”í•´ìš”.", 
                    "ê·¸ ì‚¬ëŒì€ 1ì‹œê°„ ê±¸ë¦´ ì¼ì„ 30ë¶„ ë§Œì— ëëƒˆì–´ìš”.", 
                    "ì–´ë””ë¥¼ ê°€ë„ ì•„ëŠ” ì‚¬ëŒì´ ì •ë§ ë§ì•„ìš”.", 
                    "ìŒì‹ì„ ì¡°ê¸ˆë§Œ í•˜ë ¤ê³  í–ˆëŠ”ë°, í•­ìƒ ë„ˆë¬´ ë§ì´ ë§Œë“¤ì–´ìš”."
                ],
                answer: "ì‹ë‹¹ì— ì†ë‹˜ì´ ë„ˆë¬´ ë§ì•„ì„œ ì¼í•  ì‚¬ëŒì´ ë” í•„ìš”í•´ìš”.",
                feedback: "'ì†ì´ ëª¨ìë¼ë‹¤'ëŠ” ì¼í•  ì‚¬ëŒì´ ë¶€ì¡±í•˜ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ì†ì´ ë¹ ë¥´ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì†ì´ ë¹ ë¥´ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ê·¸ ì‚¬ëŒì€ 1ì‹œê°„ ê±¸ë¦´ ì¼ì„ 30ë¶„ ë§Œì— ëëƒˆì–´ìš”.", 
                    "ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•´ë„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì ˆëŒ€ ë§í•˜ì§€ ì•Šì•„ìš”.", 
                    "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ë„ˆë¬´ ì‰½ê²Œ ë¯¿ê³ , ë¬¼ê±´ì„ ê¸ˆë°© ì‚¬ìš”.", 
                    "ì§€ê¸ˆ ë‹¹ì¥ ì—¬í–‰ì„ ë– ë‚˜ê³  ì‹¶ì–´ìš”."
                ],
                answer: "ê·¸ ì‚¬ëŒì€ 1ì‹œê°„ ê±¸ë¦´ ì¼ì„ 30ë¶„ ë§Œì— ëëƒˆì–´ìš”.",
                feedback: "'ì†ì´ ë¹ ë¥´ë‹¤'ëŠ” ì¼ì„ ì•„ì£¼ ë¹¨ë¦¬ ì˜í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ë°œì´ ë„“ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ë°œì´ ë„“ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ê·¸ ì‚¬ëŒì€ ì–´ë””ë¥¼ ê°€ë„ ì•„ëŠ” ì‚¬ëŒì´ ì •ë§ ë§ì•„ìš”.", 
                    "ì‹ë‹¹ì— ì†ë‹˜ì´ ë„ˆë¬´ ë§ì•„ì„œ ì¼í•  ì‚¬ëŒì´ ë” í•„ìš”í•´ìš”.", 
                    "ì‡¼í•‘ì„ ì˜¤ë˜ í–ˆì§€ë§Œ, ë§ˆìŒì— ë“œëŠ” ì˜·ì´ í•˜ë‚˜ë„ ì—†ì–´ìš”.", 
                    "ìŒì‹ì„ ì¡°ê¸ˆë§Œ í•˜ë ¤ê³  í–ˆëŠ”ë°, í•­ìƒ ë„ˆë¬´ ë§ì´ ë§Œë“¤ì–´ìš”."
                ],
                answer: "ê·¸ ì‚¬ëŒì€ ì–´ë””ë¥¼ ê°€ë„ ì•„ëŠ” ì‚¬ëŒì´ ì •ë§ ë§ì•„ìš”.",
                feedback: "'ë°œì´ ë„“ë‹¤'ëŠ” ì•„ëŠ” ì‚¬ëŒì´ ë§ê³  ì‚¬ëŒë“¤ê³¼ ê´€ê³„ê°€ ì¢‹ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ì†ì´ í¬ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì†ì´ í¬ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ìŒì‹ì„ ì¡°ê¸ˆë§Œ í•˜ë ¤ê³  í–ˆëŠ”ë°, í•­ìƒ ë„ˆë¬´ ë§ì´ ë§Œë“¤ì–´ìš”.", 
                    "ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•´ë„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì ˆëŒ€ ë§í•˜ì§€ ì•Šì•„ìš”.", 
                    "ê·¸ ì‚¬ëŒì€ 1ì‹œê°„ ê±¸ë¦´ ì¼ì„ 30ë¶„ ë§Œì— ëëƒˆì–´ìš”.", 
                    "ì¼í•  ì‚¬ëŒì´ ë¶€ì¡±í•´ì„œ ë„ì›€ì´ í•„ìš”í•´ìš”."
                ],
                answer: "ìŒì‹ì„ ì¡°ê¸ˆë§Œ í•˜ë ¤ê³  í–ˆëŠ”ë°, í•­ìƒ ë„ˆë¬´ ë§ì´ ë§Œë“¤ì–´ìš”.",
                feedback: "'ì†ì´ í¬ë‹¤'ëŠ” ëˆì´ë‚˜ ë¬¼ê±´ì„ ì•„ë¼ì§€ ì•Šê³  ë„‰ë„‰í•˜ê²Œ ì“°ê±°ë‚˜, ìŒì‹ì„ ë§ì´ ë§Œë“œëŠ” ì‚¬ëŒì—ê²Œ ì”ë‹ˆë‹¤."
            },
            {
                word: "ì…ì´ ë¬´ê²ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ì…ì´ ë¬´ê²ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ê·¸ ì‚¬ëŒì—ê²Œ ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•´ë„ ì ˆëŒ€ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í•˜ì§€ ì•Šì•„ìš”.", 
                    "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ë„ˆë¬´ ì‰½ê²Œ ë¯¿ê³ , ë¬¼ê±´ì„ ê¸ˆë°© ì‚¬ìš”.", 
                    "ê·¸ ì‚¬ëŒì€ ì–´ë””ë¥¼ ê°€ë„ ì•„ëŠ” ì‚¬ëŒì´ ì •ë§ ë§ì•„ìš”.", 
                    "ì§€ê¸ˆ ë‹¹ì¥ ì—¬í–‰ì„ ë– ë‚˜ê³  ì‹¶ì–´ìš”."
                ],
                answer: "ê·¸ ì‚¬ëŒì—ê²Œ ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•´ë„ ì ˆëŒ€ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í•˜ì§€ ì•Šì•„ìš”.",
                feedback: "'ì…ì´ ë¬´ê²ë‹¤'ëŠ” ë¹„ë°€ì„ ì˜ ì§€í‚¤ëŠ” ì‚¬ëŒì„ ë§í•©ë‹ˆë‹¤."
            },
            {
                word: "ê·€ê°€ ì–‡ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ê·€ê°€ ì–‡ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ë„ˆë¬´ ì‰½ê²Œ ë¯¿ê³ , ë¬¼ê±´ì„ ê¸ˆë°© ì‚¬ìš”.", 
                    "ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•´ë„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì ˆëŒ€ ë§í•˜ì§€ ì•Šì•„ìš”.", 
                    "ì‡¼í•‘ì„ ì˜¤ë˜ í–ˆì§€ë§Œ, ë§ˆìŒì— ë“œëŠ” ì˜·ì´ í•˜ë‚˜ë„ ì—†ì–´ìš”.", 
                    "ê·¸ ì‚¬ëŒì€ 1ì‹œê°„ ê±¸ë¦´ ì¼ì„ 30ë¶„ ë§Œì— ëëƒˆì–´ìš”."
                ],
                answer: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ë„ˆë¬´ ì‰½ê²Œ ë¯¿ê³ , ë¬¼ê±´ì„ ê¸ˆë°© ì‚¬ìš”.",
                feedback: "'ê·€ê°€ ì–‡ë‹¤'ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ì‰½ê²Œ ë¯¿ëŠ”ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ë§ˆìŒì´ êµ´ëšê°™ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ë§ˆìŒì´ êµ´ëšê°™ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ì§€ê¸ˆ ë‹¹ì¥ ì—¬í–‰ì„ ë– ë‚˜ê³  ì‹¶ì€ ë§ˆìŒì´ ì•„ì£¼ ì»¤ìš”.", 
                    "ì¼í•  ì‚¬ëŒì´ ë¶€ì¡±í•´ì„œ ë„ì›€ì´ í•„ìš”í•´ìš”.", 
                    "ê·¸ ì‚¬ëŒì€ ì–´ë””ë¥¼ ê°€ë„ ì•„ëŠ” ì‚¬ëŒì´ ì •ë§ ë§ì•„ìš”.", 
                    "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ë„ˆë¬´ ì‰½ê²Œ ë¯¿ì–´ìš”."
                ],
                answer: "ì§€ê¸ˆ ë‹¹ì¥ ì—¬í–‰ì„ ë– ë‚˜ê³  ì‹¶ì€ ë§ˆìŒì´ ì•„ì£¼ ì»¤ìš”.",
                feedback: "'ë§ˆìŒì´ êµ´ëšê°™ë‹¤'ëŠ” ì–´ë–¤ ê²ƒì„ ì•„ì£¼ ê°„ì ˆí•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤."
            },
            {
                word: "ëˆˆì— ì°¨ë‹¤",
                question: "ë‹¤ìŒ ì¤‘ 'ëˆˆì— ì°¨ë‹¤' í‘œí˜„ì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: [
                    "ì‡¼í•‘ì„ ì˜¤ë˜ í–ˆì§€ë§Œ, ë§ˆìŒì— ë“œëŠ” ì˜·ì´ í•˜ë‚˜ë„ ì—†ì–´ìš”.", 
                    "ìŒì‹ì„ ì¡°ê¸ˆë§Œ í•˜ë ¤ê³  í–ˆëŠ”ë°, í•­ìƒ ë„ˆë¬´ ë§ì´ ë§Œë“¤ì–´ìš”.", 
                    "ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•´ë„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì ˆëŒ€ ë§í•˜ì§€ ì•Šì•„ìš”.", 
                    "ì¼í•  ì‚¬ëŒì´ ë¶€ì¡±í•´ì„œ ë„ì›€ì´ í•„ìš”í•´ìš”."
                ],
                answer: "ì‡¼í•‘ì„ ì˜¤ë˜ í–ˆì§€ë§Œ, ë§ˆìŒì— ë“œëŠ” ì˜·ì´ í•˜ë‚˜ë„ ì—†ì–´ìš”.",
                feedback: "'ëˆˆì— ì°¨ë‹¤'ëŠ” ë§ˆìŒì— ë“¤ì–´ì„œ ë§Œì¡±ìŠ¤ëŸ½ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. (ì˜ˆ: ëˆˆì— ì°¨ëŠ” ì˜·ì´ ì—†ë‹¤ = ë§ˆìŒì— ë“œëŠ” ì˜·ì´ ì—†ë‹¤)"
            }
        ];

        // í€´ì¦ˆ ìƒíƒœ ë³€ìˆ˜
        let currentUserName = '';
        let currentQuestionIndex = 0;
        let userAnswers = {}; // { 0: "ì„ íƒí•œë‹µ", 1: "ì„ íƒí•œë‹µ" }
        let quizState = 'progress'; // 'progress' | 'feedback'

        // HTML ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const loginScreen = document.getElementById('login-screen');
        const userNameInput = document.getElementById('user-name-input');
        const loginButton = document.getElementById('login-button');
        
        const quizContainer = document.getElementById('quiz-container');
        const userGreeting = document.getElementById('user-greeting');
        
        const quizProgressScreen = document.getElementById('quiz-progress-screen');
        const questionContainer = document.getElementById('question-container');
        const questionNumberEl = document.getElementById('question-number');
        const questionWordEl = document.getElementById('question-word');
        const totalQuestionsEl = document.getElementById('total-questions');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const submitBtn = document.getElementById('submit-btn');

        const resultScreen = document.getElementById('result-screen');
        const scoreTextEl = document.getElementById('score-text');
        const feedbackContainer = document.getElementById('feedback-container');
        const retryBtn = document.getElementById('retry-btn');
        const nextBtn = document.getElementById('next-btn');

        const prevResultsContainer = document.getElementById('prev-results-container');
        const prevResultsList = document.getElementById('prev-results-list');
        const noResultsText = document.getElementById('no-results-text');

        const modal = document.getElementById('custom-modal');
        const modalMessage = document.getElementById('modal-message');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        // ëª¨ë‹¬ì°½ ê¸°ëŠ¥
        function showModal(message) {
            modalMessage.textContent = message;
            modal.classList.remove('hidden');
        }

        // ì‚¬ìš©ì ë¡œê·¸ì¸ ì²˜ë¦¬
        function handleLogin() {
            const userName = userNameInput.value.trim();
            if (userName.length < 2) {
                showModal("ì´ë¦„ì„ 2ê¸€ì ì´ìƒ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
                return;
            }
            
            currentUserName = userName;
            loginScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            
            userGreeting.textContent = `${currentUserName}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!`;
            
            // ì´ ì‚¬ìš©ìì˜ ì´ì „ ê²°ê³¼ ë¶ˆëŸ¬ì˜¤ê¸°
            loadPreviousResults();
            
            // í€´ì¦ˆ ì‹œì‘
            startQuiz();
        }

        // ì´ì „ ê²°ê³¼ ë¶ˆëŸ¬ì˜¤ê¸° (localStorage)
        function loadPreviousResults() {
            if (!currentUserName) return;
            
            const resultsKey = `koreanQuizResults_${currentUserName}`;
            try {
                const resultsRaw = localStorage.getItem(resultsKey);
                const results = resultsRaw ? JSON.parse(resultsRaw) : [];
                renderPreviousResults(results);
            } catch (error) {
                console.error("ì´ì „ ê²°ê³¼ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨ (localStorage): ", error);
                renderPreviousResults([]); // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¹ˆ ëª©ë¡ í‘œì‹œ
            }
        }

        // ì´ì „ ê²°ê³¼ UI ë Œë”ë§
        function renderPreviousResults(results) {
            prevResultsList.innerHTML = ''; // ëª©ë¡ ì´ˆê¸°í™”
            if (results.length === 0) {
                noResultsText.classList.remove('hidden');
            } else {
                noResultsText.classList.add('hidden');
                
                // ìµœì‹  ê²°ê³¼ê°€ ìœ„ë¡œ ì˜¤ë„ë¡ ì •ë ¬ (ì›ë³¸ ë°°ì—´ì„ ë°”ê¾¸ì§€ ì•Šê¸° ìœ„í•´ slice() ì‚¬ìš©)
                const sortedResults = results.slice().sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                
                sortedResults.forEach(data => {
                    const date = new Date(data.timestamp).toLocaleString('ko-KR');
                    const scoreColor = data.score === data.total ? 'text-blue-600' : 'text-red-600';

                    const resultEl = document.createElement('div');
                    resultEl.className = 'bg-gray-50 p-4 rounded-lg border border-gray-200';
                    resultEl.innerHTML = `
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold ${scoreColor}">ì ìˆ˜: ${data.score} / ${data.total}</span>
                        </div>
                        <span class="text-xs text-gray-500">${date}</span>
                    `;
                    prevResultsList.appendChild(resultEl);
                });
            }
        }

        // í€´ì¦ˆ ê²°ê³¼ ì €ì¥ (localStorage)
        function saveQuizResult(score, total, feedback) {
            if (!currentUserName) return; // ì‚¬ìš©ìê°€ ì—†ìœ¼ë©´ ì €ì¥ ì•ˆ í•¨

            const newResult = {
                userName: currentUserName,
                score: score,
                total: total,
                feedback: feedback.map(f => ({ q: f.question, a: f.answer })), // ê°„ë‹¨í•˜ê²Œ ì €ì¥
                timestamp: new Date().toISOString() // ISO ë¬¸ìì—´ë¡œ ì €ì¥
            };

            const resultsKey = `koreanQuizResults_${currentUserName}`;
            try {
                const prevResultsRaw = localStorage.getItem(resultsKey);
                const prevResults = prevResultsRaw ? JSON.parse(prevResultsRaw) : [];
                
                prevResults.push(newResult);
                
                // localStorageì— ì €ì¥
                localStorage.setItem(resultsKey, JSON.stringify(prevResults));
                
                // UI ì—…ë°ì´íŠ¸
                renderPreviousResults(prevResults);
            } catch (error) {
                console.error("ê²°ê³¼ ì €ì¥ ì‹¤íŒ¨ (localStorage): ", error);
            }
        }

        // ë°°ì—´ ì„ê¸° í•¨ìˆ˜ (Fisher-Yates Shuffle)
        function shuffleArray(array) {
            let currentIndex = array.length,  randomIndex;
            
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;

                [array[currentIndex], array[randomIndex]] = [
                    array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // í€´ì¦ˆ ì‹œì‘ í•¨ìˆ˜
        function startQuiz() {
            currentQuestionIndex = 0;
            userAnswers = {};
            quizState = 'progress';
            totalQuestionsEl.textContent = quizData.length;

            resultScreen.classList.add('hidden');
            quizProgressScreen.classList.remove('hidden');
            
            submitBtn.textContent = 'ì±„ì í•˜ê¸°';
            submitBtn.disabled = true;

            shuffleArray(quizData); // í€´ì¦ˆ ë¬¸ì œ ìˆœì„œ ì„ê¸°
            renderQuestion();
        }

        // ì§ˆë¬¸ ë Œë”ë§
        function renderQuestion() {
            if (currentQuestionIndex < 0 || currentQuestionIndex >= quizData.length) {
                console.error("ìœ íš¨í•˜ì§€ ì•Šì€ ì§ˆë¬¸ ì¸ë±ìŠ¤:", currentQuestionIndex);
                return;
            }
            
            const question = quizData[currentQuestionIndex];
            
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = question.question;
            // 'question-word'ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì½”ë“œ ì œê±°
            
            optionsContainer.innerHTML = '';

            // --- ì„ íƒì§€ ìˆœì„œ ì„ê¸° ---
            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);
            // --- ---
            
            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'w-full text-left p-4 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition duration-200 text-gray-700';
                
                // ì‚¬ìš©ìê°€ ì´ì „ì— ì„ íƒí•œ ë‹µì´ ìˆìœ¼ë©´ í‘œì‹œ
                if (userAnswers[currentQuestionIndex] === option) {
                    button.classList.add('bg-blue-100', 'border-blue-500', 'font-semibold');
                }

                button.addEventListener('click', () => selectOption(button, option));
                optionsContainer.appendChild(button);
            });

            submitBtn.disabled = userAnswers[currentQuestionIndex] === undefined;
            
            // ë§ˆì§€ë§‰ ë¬¸ì œì¸ì§€ í™•ì¸
            if (currentQuestionIndex === quizData.length - 1) {
                submitBtn.textContent = 'ìµœì¢… ê²°ê³¼ ë³´ê¸°';
            } else {
                submitBtn.textContent = 'ì±„ì í•˜ê¸°';
            }
            quizState = 'progress';
        }

        // ì„ íƒì§€ ì„ íƒ
        function selectOption(selectedButton, option) {
            // 'feedback' ìƒíƒœì¼ ë•ŒëŠ” ì„ íƒ ë³€ê²½ ë¶ˆê°€
            if (quizState === 'feedback') return;

            // ëª¨ë“  ë²„íŠ¼ì˜ ì„ íƒ ìŠ¤íƒ€ì¼ ì œê±°
            Array.from(optionsContainer.children).forEach(btn => {
                btn.classList.remove('bg-blue-100', 'border-blue-500', 'font-semibold');
            });

            // í´ë¦­í•œ ë²„íŠ¼ì—ë§Œ ìŠ¤íƒ€ì¼ ì ìš©
            selectedButton.classList.add('bg-blue-100', 'border-blue-500', 'font-semibold');
            
            userAnswers[currentQuestionIndex] = option;
            submitBtn.disabled = false;
        }

        // ì±„ì í•˜ê¸° ë²„íŠ¼ í´ë¦­
        function submitQuiz() {
            if (quizState === 'feedback') return; // ì´ë¯¸ í”¼ë“œë°± ìƒíƒœë©´ ë¬´ì‹œ
            if (userAnswers[currentQuestionIndex] === undefined) return; // ë‹µì„ ì„ íƒí•˜ì§€ ì•Šì•˜ìœ¼ë©´ ë¬´ì‹œ

            quizState = 'feedback';
            const question = quizData[currentQuestionIndex];
            const selectedAnswer = userAnswers[currentQuestionIndex];
            const isCorrect = (selectedAnswer === question.answer);

            // ëª¨ë“  ì„ íƒì§€ ë²„íŠ¼ ë¹„í™œì„±í™” ë° ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                const optionText = btn.textContent;

                if (optionText === question.answer) {
                    // ì •ë‹µ
                    btn.classList.add('bg-green-100', 'border-green-500', 'ring-2', 'ring-green-400');
                    btn.classList.remove('bg-blue-100', 'border-blue-500');
                } else if (optionText === selectedAnswer && !isCorrect) {
                    // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì˜¤ë‹µ
                    btn.classList.add('bg-red-100', 'border-red-500', 'ring-2', 'ring-red-400');
                    btn.classList.remove('bg-blue-100', 'border-blue-500');
                } else {
                    // ì„ íƒí•˜ì§€ ì•Šì€ ì˜¤ë‹µ
                    btn.classList.add('bg-gray-50', 'text-gray-500');
                }
            });

            // ê²°ê³¼ í™”ë©´ í‘œì‹œ
            quizProgressScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            feedbackContainer.innerHTML = ''; // í”¼ë“œë°± ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”
            
            const feedbackTitle = document.createElement('h3');
            feedbackTitle.className = 'text-xl font-bold mb-2';
            
            const feedbackText = document.createElement('p');
            feedbackText.className = 'text-gray-700';
            feedbackText.textContent = question.feedback;

            if (isCorrect) {
                feedbackTitle.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                feedbackTitle.className += ' text-green-700';
                scoreTextEl.textContent = 'ì •ë‹µ!';
                scoreTextEl.className = 'text-5xl font-bold text-center text-green-600 mb-6';
            } else {
                feedbackTitle.textContent = 'í‹€ë ¸ìŠµë‹ˆë‹¤.';
                feedbackTitle.className += ' text-red-700';
                feedbackContainer.appendChild(feedbackTitle);
                
                const yourAnswerEl = document.createElement('p');
                yourAnswerEl.className = 'text-sm text-gray-600';
                yourAnswerEl.innerHTML = `<b>ë‚´ê°€ ì„ íƒí•œ ë‹µ:</b> ${selectedAnswer}`;
                feedbackContainer.appendChild(yourAnswerEl);
                
                const correctAnswerEl = document.createElement('p');
                correctAnswerEl.className = 'text-sm text-gray-600 mb-2';
                correctAnswerEl.innerHTML = `<b>ì •ë‹µ:</b> ${question.answer}`;
                feedbackContainer.appendChild(correctAnswerEl);
                
                scoreTextEl.textContent = 'ì˜¤ë‹µ';
                scoreTextEl.className = 'text-5xl font-bold text-center text-red-600 mb-6';
            }
            
            feedbackContainer.appendChild(feedbackTitle);
            feedbackContainer.appendChild(feedbackText);

            // ë²„íŠ¼ ì„¤ì •
            retryBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');

            if (currentQuestionIndex === quizData.length - 1) {
                // ë§ˆì§€ë§‰ ë¬¸ì œì¸ ê²½ìš°
                nextBtn.textContent = 'ìµœì¢… ì ìˆ˜ ë³´ê¸°';
            } else {
                nextBtn.textContent = 'ë‹¤ìŒ ë¬¸ì œ';
            }
        }

        // ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼ / ìµœì¢… ì ìˆ˜ ë³´ê¸° ë²„íŠ¼
        function nextQuestion() {
            if (currentQuestionIndex === quizData.length - 1) {
                // ìµœì¢… ì ìˆ˜ ê³„ì‚° ë° í‘œì‹œ
                showFinalResults();
            } else {
                // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
                currentQuestionIndex++;
                quizProgressScreen.classList.remove('hidden');
                resultScreen.classList.add('hidden');
                renderQuestion();
            }
        }

        // ìµœì¢… ê²°ê³¼ í‘œì‹œ
        function showFinalResults() {
            let score = 0;
            const detailedFeedback = [];

            quizData.forEach((question, index) => {
                const selected = userAnswers[index];
                const correct = question.answer;
                const isCorrect = (selected === correct);
                if (isCorrect) {
                    score++;
                }
                detailedFeedback.push({
                    question: question.question,
                    selected: selected || "ì„ íƒ ì•ˆ í•¨",
                    answer: correct,
                    isCorrect: isCorrect,
                    feedback: question.feedback
                });
            });

            const total = quizData.length;
            const finalScorePercent = Math.round((score / total) * 100);
            
            quizProgressScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            scoreTextEl.textContent = `${finalScorePercent}ì `;
            scoreTextEl.className = 'text-5xl font-bold text-center text-blue-800 mb-6';

            feedbackContainer.innerHTML = `<h3 class="text-xl font-bold mb-4 text-gray-800">ì „ì²´ ë¬¸ì œ ë‹¤ì‹œë³´ê¸° (${score} / ${total} ì •ë‹µ)</h3>`;

            detailedFeedback.forEach((fb, index) => {
                const fbEl = document.createElement('div');
                fbEl.className = `p-3 rounded-lg mb-3 ${fb.isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`;
                fbEl.innerHTML = `
                    <p class="font-semibold text-gray-700 mb-1">${index + 1}. ${fb.question}</p>
                    ${fb.isCorrect ? `
                        <p class="text-sm text-green-700"><b>ì •ë‹µ:</b> ${fb.answer}</p>
                    ` : `
                        <p class="text-sm text-red-700"><b>ë‚´ê°€ ì„ íƒí•œ ë‹µ:</b> ${fb.selected}</p>
                        <p class="text-sm text-green-700"><b>ì •ë‹µ:</b> ${fb.answer}</p>
                    `}
                    <p class="text-xs text-gray-600 mt-1">${fb.feedback}</p>
                `;
                feedbackContainer.appendChild(fbEl);
            });
            
            // ë²„íŠ¼ ë³€ê²½
            nextBtn.classList.add('hidden');
            retryBtn.classList.remove('hidden');
            retryBtn.textContent = 'ìƒˆë¡œìš´ í€´ì¦ˆ í’€ê¸°';

            // ê²°ê³¼ ì €ì¥
            saveQuizResult(score, total, detailedFeedback);
        }

        // ë‹¤ì‹œ í’€ê¸° ë²„íŠ¼
        function retryQuiz() {
            startQuiz();
        }

        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            // ëª¨ë“  ìš”ì†Œê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (loginButton && submitBtn && nextBtn && retryBtn && modalCloseBtn && userNameInput) {
                // ë¡œê·¸ì¸ ë²„íŠ¼
                loginButton.addEventListener('click', handleLogin);
                
                // ì´ë¦„ ì…ë ¥ì°½ì—ì„œ Enter í‚¤ë¡œ ë¡œê·¸ì¸
                userNameInput.addEventListener('keyup', (event) => {
                    if (event.key === 'Enter') {
                        handleLogin();
                    }
                });

                // í€´ì¦ˆ ë²„íŠ¼
                submitBtn.addEventListener('click', submitQuiz);
                nextBtn.addEventListener('click', nextQuestion);
                retryBtn.addEventListener('click', retryQuiz);
                
                // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
                modalCloseBtn.addEventListener('click', () => {
                    modal.classList.add('hidden');
                });
            } else {
                console.error("í€´ì¦ˆ ì•± ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. HTML ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
        });
    </script>
</body>
</html>


