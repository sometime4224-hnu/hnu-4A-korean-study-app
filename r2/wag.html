<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ìœ í˜•ë³„ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f3f4f6; /* gray-100 */
        }

        /* ë¼ë””ì˜¤ ë²„íŠ¼ ìˆ¨ê¸°ê¸° */
        .option-radio {
            display: none;
        }

        /* ì»¤ìŠ¤í…€ ì˜µì…˜ ë²„íŠ¼ */
        .option-label {
            display: block;
            padding: 1rem;
            border: 2px solid #e5e7eb; /* gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            transition: all 0.2s;
            cursor: pointer;
            background-color: #ffffff; /* white */
        }
        .option-label:hover {
            background-color: #f9fafb; /* gray-50 */
        }

        /* ì„ íƒëœ ì˜µì…˜ */
        .option-radio:checked + .option-label {
            background-color: #e0f2fe; /* sky-100 */
            border-color: #0284c7; /* sky-600 */
            color: #0369a1; /* sky-800 */
            font-weight: 600;
        }

        /* ì±„ì  í›„: ì •ë‹µ */
        .option-label.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #16a34a; /* green-600 */
            color: #15803d; /* green-700 */
            font-weight: 600;
        }

        /* ì±„ì  í›„: ì˜¤ë‹µ */
        .option-label.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #dc2626; /* red-600 */
            color: #b91c1c; /* red-700 */
        }

        /* ì±„ì  í›„: ì˜¤ë‹µì¼ ë•Œ ì •ë‹µ í‘œì‹œ */
        .option-label.correct-answer {
            box-shadow: 0 0 10px rgba(22, 163, 74, 0.7);
            border-color: #16a34a; /* green-600 */
        }

        /* ë²„íŠ¼ ë¹„í™œì„±í™” */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8">

        <!-- í€´ì¦ˆ ì»¨í…Œì´ë„ˆ -->
        <div id="quiz-container">
            <header class="mb-6">
                <!-- í˜ì´ì§€ ì œëª© (ìœ í˜•) -->
                <h1 id="page-title" class="text-2xl font-bold text-gray-800 mb-2"></h1>
                <!-- ì „ì²´ ì§„í–‰ ìƒí™© -->
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-500">ì „ì²´ ì§„í–‰ë„</span>
                    <span id="progress-text" class="text-sm font-semibold text-gray-600"></span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </header>

            <!-- ë¬¸ì œë“¤ì´ í‘œì‹œë  ì˜ì—­ -->
            <div id="questions-wrapper" class="space-y-8">
                <!-- JSë¡œ ë¬¸ì œ ë™ì  ìƒì„± -->
            </div>

            <!-- í˜ì´ì§€ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
            <footer class="mt-10 pt-6 border-t border-gray-200 flex justify-between items-center">
                <button id="prev-page-btn" onclick="goToPrevPage()" class="bg-gray-200 text-gray-700 font-bold py-2 px-5 rounded-lg hover:bg-gray-300 transition">
                    ì´ì „ ìœ í˜•
                </button>
                <div id="page-feedback" class="text-lg font-semibold text-blue-600"></div>
                <button id="next-page-btn" onclick="goToNextPage()" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition">
                    ë‹¤ìŒ ìœ í˜•
                </button>
                <button id="grade-page-btn" onclick="gradeCurrentPage()" class="bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 transition">
                    ì±„ì í•˜ê¸°
                </button>
            </footer>
        </div>

        <!-- ê²°ê³¼ ì»¨í…Œì´ë„ˆ (ìˆ¨ê¹€) -->
        <div id="result-container" class="hidden text-center">
             <h1 class="text-3xl font-bold text-gray-800 mb-4">ì „ì²´ í€´ì¦ˆ ì™„ë£Œ!</h1>
            <div class="bg-blue-50 p-6 rounded-lg shadow-inner mb-6">
                <p class="text-lg text-gray-700">ì´ <span id="total-questions" class="font-bold"></span>ë¬¸ì œ ì¤‘</p>
                <p class="text-6xl font-extrabold text-blue-600 my-2"><span id="total-score"></span></p>
                <p class="text-xl font-semibold text-gray-800"><span id="total-percentage"></span>%</p>
            </div>
            <p id="result-message" class="text-lg text-gray-600 mb-8"></p>
            <button onclick="restartQuiz()" class="w-full max-w-xs mx-auto bg-gray-700 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-gray-800 transition">
                ì²˜ìŒìœ¼ë¡œ
            </button>
        </div>
    </div>

    <script>
        // --- í€´ì¦ˆ ë°ì´í„° ---
        const quizData = [
            {
                title: "ìœ í˜• 1: ë¹ˆì¹¸ì— ì•Œë§ì€ ê²ƒ ê³ ë¥´ê¸° (1-3)",
                questions: [
                    {
                        id: 1,
                        text: "1. ì¹œêµ¬ê°€ ê³„íšì„± ì—†ì´ ì¼ì„ í•˜ëŠ” í¸ì´ë¼ì„œ ì¡°ì–¸ì„ í•´ ì¤¬ë”ë‹ˆ ( ... ) ìê¸° ì¼ì— ê°„ì„­í•˜ì§€ ë§ë¼ê³  í™”ë¥¼ ë‚¸ë‹¤.",
                        options: ["ì§€ë£¨í•˜ë‹¤ê³ ", "ì§€ì í•œ ëŒ€ë¡œ", "ìë‘ìŠ¤ëŸ½ë‹¤ê³ ", "ë°œëˆí•˜ë©´ì„œ"],
                        answer: "ë°œëˆí•˜ë©´ì„œ"
                    },
                    {
                        id: 2,
                        text: "2. ë°©ì†¡ì—ì„œ ì´ë²ˆ êµ­ì œ ì˜í™”ì œëŠ” ë¶ˆë§Œí•œ ì˜í™”ê°€ ë§ë‹¤ê³  í–ˆì§€ë§Œ ì§ì ‘ ê°€ ë³´ë‹ˆ ( ... ).",
                        options: ["ê¸°ëŒ€ë§Œ ëª»í–ˆë‹¤", "ì¸ìƒì ì´ì—ˆë‹¤", "ë³¼ê±°ë¦¬ê°€ ë§ì•˜ë‹¤", "ìˆ˜ì¤€ì´ ë†’ì•˜ë‹¤"],
                        answer: "ì¸ìƒì ì´ì—ˆë‹¤"
                    },
                    {
                        id: 3,
                        text: "3. ë‚´ ì§ì¥ ë™ë£ŒëŠ” ( ... ) ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì„ ë“¤ìœ¼ë©´ ê¸ˆë°© ìê¸°ì˜ ìƒê°ì„ ë°”ê¾¼ë‹¤.",
                        options: ["ê·€ê°€ ì–‡ì•„ì„œ", "ëˆˆì´ ë†’ì•„ì„œ", "ì…ì´ ê°€ë²¼ì›Œì„œ", "ë°œì´ ë„“ì–´ì„œ"],
                        answer: "ê·€ê°€ ì–‡ì•„ì„œ"
                    }
                ]
            },
            {
                title: "ìœ í˜• 2: ì˜ë¯¸ê°€ ë¹„ìŠ·í•œ ê²ƒ ê³ ë¥´ê¸° (4-6)",
                questions: [
                    {
                        id: 4,
                        text: "4. <u>ì»´í“¨í„°ì•¼ë§ë¡œ</u> í˜„ëŒ€ì¸ì˜ ìƒí™œì—ì„œ ì—†ì–´ì„œëŠ” ì•ˆ ë˜ëŠ” ë¬¼ê±´ì´ë‹¤.",
                        options: ["ì»´í“¨í„°ëŠ”", "ì»´í“¨í„°ê¹Œì§€", "ì»´í“¨í„°ì¡°ì°¨", "ì»´í“¨í„°ë¼ëŠ”"],
                        answer: "ì»´í“¨í„°ì¡°ì°¨"
                    },
                    {
                        id: 5,
                        text: "5. ì¢‹ì€ ì¬ë£Œë¡œ ìŒì‹ì„ ë§Œë“¤ì—ˆìœ¼ë‹ˆê¹Œ <u>ë§›ìˆì„ ìˆ˜ë°–ì— ì—†ë‹¤.</u>",
                        options: ["ì—¬ê°„ ë§›ìˆì§€ ì•Šë‹¤", "ë§›ìˆëŠ” ê²ƒ ê°™ë‹¤", "ë§›ìˆëŠ” ê²Œ ë‹¹ì—°í•˜ë‹¤", "ë§›ìˆëŠ” ê²ƒì´ë‹¤"],
                        answer: "ë§›ìˆëŠ” ê²Œ ë‹¹ì—°í•˜ë‹¤"
                    },
                    {
                        id: 6,
                        text: "6. ê·¸ ì¹œêµ¬ëŠ” í•­ìƒ ì•½ì† ì‹œê°„ì„ ì•ˆ ì§€í‚¤ë‹ˆê¹Œ ì˜¤ëŠ˜ë„ <u>ëŠ¦ì„ ê²Œ ë»”í•˜ë‹¤.</u>",
                        options: ["ëŠ¦ì„ ê³„íšì´ë‹¤", "ëŠ¦ì„ ìˆ˜ë„ ìˆë‹¤", "ëŠ¦ì„ ì¤„ ì•Œì•˜ë‹¤", "í‹€ë¦¼ì—†ì´ ëŠ¦ì„ ê²ƒì´ë‹¤"],
                        answer: "í‹€ë¦¼ì—†ì´ ëŠ¦ì„ ê²ƒì´ë‹¤"
                    }
                ]
            },
            {
                title: "ìœ í˜• 3: ì•Œë§ì€ ê²ƒ ê³ ë¥´ê¸° (7-10)",
                questions: [
                    {
                        id: 7,
                        text: "7. ì–´ì œ ê³ ë“±í•™êµ ë™ì°½ì„ ë§Œë‚¬ë‹¤. ì˜¤ëœë§Œì— ë§Œë‚˜ì„œ í•  ë§ì´ ë§ì„ ì¤„ ì•Œì•˜ëŠ”ë° ì˜¤íˆë ¤ ( ... )ê°€ ì—†ì–´ì„œ ì–´ìƒ‰í•˜ê²Œ ì›ƒê¸°ë§Œ í–ˆë‹¤.",
                        options: ["ë³¼ê±°ë¦¬", "ê±±ì •ê±°ë¦¬", "ì›ƒìŒê±°ë¦¬", "ì´ì•¼ê¹ƒê±°ë¦¬"],
                        answer: "ì´ì•¼ê¹ƒê±°ë¦¬"
                    },
                    {
                        id: 8,
                        text: "8. ë‹¤ìŒ ë‹¬ì— ì—´ë¦¬ëŠ” í•™êµ ì¶•ì œì—ì„œ ìš°ë¦¬ ë°˜ì´ ë¬´ìŠ¨ ê³µì—°ì„ í• ì§€ ì •í•˜ëŠ” íšŒì˜ì—ì„œ ëª¨ë‘ ë…¸ë˜ë¥¼ í•˜ìê³  í–ˆë‹¤. ê·¸ëŸ°ë° ì§„ìš°ëŠ” ë…¸ë˜ê°€ ì‹«ë‹¤ë©´ì„œ ê³„ì† ì¶¤ì„ ì¶”ìê³  ì£¼ì¥í•´ì„œ ì •ë§ í˜ë“¤ì—ˆë‹¤. ì§„ìš°ëŠ” ë„ˆë¬´ ( ... ) ê²ƒ ê°™ë‹¤.",
                        options: ["ì…ì´ ë¬´ê±°ìš´", "ê³ ì§‘ì´ ì„¼", "ìì¡´ì‹¬ì´ ê°•í•œ", "ëˆˆì¹˜ê°€ ë¹ ë¥¸"],
                        answer: "ê³ ì§‘ì´ ì„¼" // ì´ë¯¸ì§€ ì¬í™•ì¸: 'ê³ ì§‘ì´ ì„¼'ì´ ë¬¸ë§¥ìƒ ë§ìŠµë‹ˆë‹¤. 'ëˆˆì¹˜ê°€ ë¹ ë¥¸'ì€ ë°˜ëŒ€ ì˜ë¯¸.
                    },
                    {
                        id: 9,
                        text: "9. ì˜¤ëŠ˜ ì…ì‚¬ ì‹œí—˜ ë©´ì ‘ ê²°ê³¼ê°€ ë‚˜ì™”ëŠ”ë° ë˜ ë–¨ì–´ì ¸ì„œ ì •ë§ ê´´ë¡­ë‹¤. ( ... ) ì˜¤ëŠ˜ ì €ë… ëª¨ì„ë„ ì·¨ì†Œí•˜ê³  ì§‘ì—ì„œ ì¡°ìš©íˆ ì‰´ê¹Œ í•œë‹¤.",
                        options: ["ê¸°ë¶„ì´ ì•ˆ ì¢‹ì€ì§€", "ê¸°ë¶„ì´ ì•ˆ ì¢‹ê³  í•´ì„œ", "ê¸°ë¶„ì´ ì•ˆ ì¢‹ì„ ì •ë„ë¡œ", "ê¸°ë¶„ì´ ì•ˆ ì¢‹ì„ ë¿ë§Œ ì•„ë‹ˆë¼"],
                        answer: "ê¸°ë¶„ì´ ì•ˆ ì¢‹ê³  í•´ì„œ"
                    },
                    {
                        id: 10,
                        text: "10. ì‹¤ìˆ˜ë¥¼ í–ˆë‹¤ê³  ë„ˆë¬´ í˜ë“¤ì–´í•˜ê±°ë‚˜ í¬ê¸°í•  í•„ìš”ëŠ” ì—†ë‹¤. ì‚¬ëŒì€ ëˆ„êµ¬ë‚˜ ì‚´ë‹¤ ë³´ë©´ ì‹¤ìˆ˜ë¥¼ ( ... ) ë•Œë¬¸ì´ë‹¤.",
                        options: ["í•  ë»”í–ˆê¸°", "í•  ìˆ˜ ì—†ê¸°", "í•˜ê¸° ë§ˆë ¨ì´ê¸°", "ì—¬ê°„ í•˜ì§€ ì•Šê¸°"],
                        answer: "í•˜ê¸° ë§ˆë ¨ì´ê¸°"
                    }
                ]
            },
            {
                title: "ìœ í˜• 4: ê´‘ê³  ë° ì‚¬ì„¤ (11-12)",
                questions: [
                    {
                        id: 11,
                        text: "11. [ê´‘ê³ ] íŠ¹ë³„í•œ ë‚ ì— ê°€ì¡±ì´ë‚˜ ì—°ì¸ê³¼ ì–´ë””ì— ê°ˆì§€ ì •í•˜ëŠ” ê²ƒì€ ( ... ). ê·¸ëŸ´ ë•ŒëŠ” ì¬ë¯¸ìˆëŠ” ë³¼ê±°ë¦¬ë¡œ ê°€ë“í•œ ì„œìš¸ì›”ë“œë¡œ ì˜¤ì‹­ì‹œì˜¤.",
                        options: ["ë§¤ìš° ì–´ë ¤ìš¸ ì •ë„ì…ë‹ˆë‹¤", "ì•„ì£¼ ì–´ë µê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤", "ì—¬ê°„ ì–´ë ¤ìš´ ì¼ì´ ì•„ë‹™ë‹ˆë‹¤", "êµ‰ì¥íˆ ì–´ë µë‹¤ëŠ” ì ì…ë‹ˆë‹¤"],
                        answer: "ì—¬ê°„ ì–´ë ¤ìš´ ì¼ì´ ì•„ë‹™ë‹ˆë‹¤"
                    },
                    {
                        id: 12,
                        text: "12. [ì‚¬ì„¤] ìš”ì¦˜ ë¶€ëª¨ë“¤ì€ ì•„ì´ë¥¼ ì•¼ë‹¨ì¹˜ì§€ ì•Šì•„... ì•„ì´ê°€ ì˜ëª»ì„ í•´ë„ ì•¼ë‹¨ì„ ì¹˜ê¸°ëŠ”ì»¤ë…• ê·¸ëŸ° ì•„ì´ì˜ í–‰ë™ì„ ì§€ì í•˜ëŠ” ì‚¬ëŒì—ê²Œ í™”ë¥¼ ë‚´ëŠ” ê²½ìš°ë¥¼ ìì£¼ ë³¸ë‹¤. ... ë¶€ëª¨ë“¤ì€ ( ... )ëŠ” ë§ì„ ê¸°ì–µí•˜ê³ ... ë„ì™€ì¤˜ì•¼ í•œë‹¤.",
                        options: ["í˜¸ë‘ì´ë„ ì œ ë§ í•˜ë©´ ì˜¨ë‹¤", "ì„¸ ì‚´ ë²„ë¦‡ ì—¬ë“ ê¹Œì§€ ê°„ë‹¤", "ì Šì–´ì„œ ê³ ìƒì€ ì‚¬ì„œë„ í•œë‹¤", "ê°œêµ¬ë¦¬ ì˜¬ì±™ì´ ì  ìƒê° ëª» í•œë‹¤"],
                        answer: "ì„¸ ì‚´ ë²„ë¦‡ ì—¬ë“ ê¹Œì§€ ê°„ë‹¤"
                    }
                ]
            }
        ];

        // --- ìƒíƒœ ë³€ìˆ˜ ---
        let currentPageIndex = 0;
        let userAnswers = {}; // { 1: "ë‹µë³€1", 2: "ë‹µë³€2", ... }
        let pageScores = {}; // { 0: 2, 1: 3, ... } (í˜ì´ì§€ ì¸ë±ìŠ¤: ë§ì€ ê°œìˆ˜)
        const totalQuestionsCount = quizData.reduce((acc, page) => acc + page.questions.length, 0);

        // --- HTML ìš”ì†Œ ---
        const quizContainer = document.getElementById('quiz-container');
        const resultContainer = document.getElementById('result-container');
        const pageTitle = document.getElementById('page-title');
        const progressText = document.getElementById('progress-text');
        const progressBar = document.getElementById('progress-bar');
        const questionsWrapper = document.getElementById('questions-wrapper');
        const prevPageBtn = document.getElementById('prev-page-btn');
        const nextPageBtn = document.getElementById('next-page-btn');
        const gradePageBtn = document.getElementById('grade-page-btn');
        const pageFeedback = document.getElementById('page-feedback');

        // --- ê²°ê³¼ ìš”ì†Œ ---
        const totalQuestionsEl = document.getElementById('total-questions');
        const totalScoreEl = document.getElementById('total-score');
        const totalPercentageEl = document.getElementById('total-percentage');
        const resultMessageEl = document.getElementById('result-message');


        // --- í•¨ìˆ˜ ---

        /** í€´ì¦ˆ í˜ì´ì§€ ë¡œë“œ */
        function loadPage(pageIndex) {
            const pageData = quizData[pageIndex];
            pageTitle.textContent = pageData.title;
            questionsWrapper.innerHTML = '';
            pageFeedback.textContent = '';
            
            // ë¬¸ì œ ìƒì„±
            pageData.questions.forEach(q => {
                const questionElement = document.createElement('div');
                questionElement.id = `question-${q.id}`;
                
                // ì§ˆë¬¸ í…ìŠ¤íŠ¸ (ë°‘ì¤„ íƒœê·¸ ì¸ì‹)
                const questionText = document.createElement('p');
                questionText.className = "text-lg font-medium text-gray-800 mb-4";
                questionText.innerHTML = q.text.replace(/(\(.*?\))/g, '<span class="font-bold text-blue-600">$1</span>'); // ê´„í˜¸ ê°•ì¡°
                questionElement.appendChild(questionText);

                // ì˜µì…˜ ì»¨í…Œì´ë„ˆ
                const optionsContainer = document.createElement('div');
                optionsContainer.className = "space-y-3";
                optionsContainer.id = `options-${q.id}`;
                
                q.options.forEach((option, index) => {
                    const optionId = `q${q.id}-opt${index}`;
                    
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.id = optionId;
                    radio.name = `question-${q.id}`;
                    radio.value = option;
                    radio.className = 'option-radio';
                    radio.onclick = () => selectAnswer(q.id, option);
                    
                    // ì´ì „ì— ì„ íƒí•œ ë‹µì´ ìˆìœ¼ë©´ ì²´í¬
                    if (userAnswers[q.id] === option) {
                        radio.checked = true;
                    }

                    const label = document.createElement('label');
                    label.htmlFor = optionId;
                    label.textContent = ` (${index + 1}) ${option}`;
                    label.className = 'option-label';

                    optionsContainer.appendChild(radio);
                    optionsContainer.appendChild(label);
                });

                questionElement.appendChild(optionsContainer);
                questionsWrapper.appendChild(questionElement);
            });

            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updateNavigation();
            
            // ì´ë¯¸ ì±„ì ëœ í˜ì´ì§€ì¸ì§€ í™•ì¸
            if (pageScores[pageIndex] !== undefined) {
                showGradedPage(pageIndex);
            }
        }

        /** ë‹µì•ˆ ì„ íƒ */
        function selectAnswer(questionId, answer) {
            userAnswers[questionId] = answer;
            updateNavigation(); // ì±„ì  ë²„íŠ¼ í™œì„±í™” ì—¬ë¶€ ì²´í¬
        }

        /** í˜„ì¬ í˜ì´ì§€ ì±„ì  */
        function gradeCurrentPage() {
            const pageData = quizData[currentPageIndex];
            let correctCount = 0;

            pageData.questions.forEach(q => {
                const selectedAnswer = userAnswers[q.id];
                const isCorrect = selectedAnswer === q.answer;
                
                if (isCorrect) {
                    correctCount++;
                }

                // ìŠ¤íƒ€ì¼ ì ìš©
                const optionsContainer = document.getElementById(`options-${q.id}`);
                const labels = optionsContainer.querySelectorAll('.option-label');
                const radios = optionsContainer.querySelectorAll('.option-radio');

                labels.forEach((label, index) => {
                    const optionText = q.options[index];
                    
                    if (optionText === q.answer) {
                        label.classList.add('correct'); // ì •ë‹µ
                        if (selectedAnswer !== q.answer) {
                             label.classList.add('correct-answer'); // ì˜¤ë‹µì‹œ ì •ë‹µ í‘œì‹œ
                        }
                    } else if (optionText === selectedAnswer && !isCorrect) {
                        label.classList.add('incorrect'); // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì˜¤ë‹µ
                    }
                    
                    radios[index].disabled = true; // ë¼ë””ì˜¤ ë²„íŠ¼ ë¹„í™œì„±í™”
                });
            });

            pageScores[currentPageIndex] = correctCount;
            pageFeedback.textContent = `${pageData.questions.length}ê°œ ì¤‘ ${correctCount}ê°œ ì •ë‹µ!`;
            updateNavigation();
        }

        /** ì±„ì ëœ í˜ì´ì§€ ìŠ¤íƒ€ì¼ ë‹¤ì‹œ ë³´ì—¬ì£¼ê¸° */
        function showGradedPage(pageIndex) {
            const pageData = quizData[pageIndex];
            
             pageData.questions.forEach(q => {
                const selectedAnswer = userAnswers[q.id];
                const isCorrect = selectedAnswer === q.answer;

                const optionsContainer = document.getElementById(`options-${q.id}`);
                if (!optionsContainer) return; // í˜ì´ì§€ê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŒ
                 
                const labels = optionsContainer.querySelectorAll('.option-label');
                const radios = optionsContainer.querySelectorAll('.option-radio');

                labels.forEach((label, index) => {
                    const optionText = q.options[index];
                    
                    if (optionText === q.answer) {
                        label.classList.add('correct');
                        if (selectedAnswer !== q.answer) {
                             label.classList.add('correct-answer');
                        }
                    } else if (optionText === selectedAnswer && !isCorrect) {
                        label.classList.add('incorrect');
                    }
                    
                    radios[index].disabled = true;
                });
            });
            
            pageFeedback.textContent = `${pageData.questions.length}ê°œ ì¤‘ ${pageScores[pageIndex]}ê°œ ì •ë‹µ!`;
            updateNavigation();
        }


        /** ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸ */
        function updateNavigation() {
            const pageData = quizData[currentPageIndex];
            const isGraded = pageScores[currentPageIndex] !== undefined;

            // ì´ì „ ë²„íŠ¼
            prevPageBtn.disabled = currentPageIndex === 0;

            // ì±„ì  ë²„íŠ¼
            // ëª¨ë“  ì§ˆë¬¸ì— ë‹µí–ˆëŠ”ì§€ í™•ì¸
            const allAnswered = pageData.questions.every(q => userAnswers[q.id] !== undefined);
            gradePageBtn.style.display = isGraded ? 'none' : 'block';
            gradePageBtn.disabled = !allAnswered;
            
            // ë‹¤ìŒ ë²„íŠ¼
            nextPageBtn.style.display = isGraded ? 'block' : 'none';
            if (currentPageIndex === quizData.length - 1) {
                nextPageBtn.textContent = 'ì „ì²´ ê²°ê³¼ ë³´ê¸°';
            } else {
                nextPageBtn.textContent = 'ë‹¤ìŒ ìœ í˜•';
            }
            
            // ì§„í–‰ë„
            const progress = ((currentPageIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${currentPageIndex + 1} / ${quizData.length}`;
        }

        /** ë‹¤ìŒ í˜ì´ì§€ë¡œ */
        function goToNextPage() {
            if (currentPageIndex < quizData.length - 1) {
                currentPageIndex++;
                loadPage(currentPageIndex);
            } else {
                // ë§ˆì§€ë§‰ í˜ì´ì§€ -> ê²°ê³¼ ë³´ê¸°
                showTotalResults();
            }
        }

        /** ì´ì „ í˜ì´ì§€ë¡œ */
        function goToPrevPage() {
            if (currentPageIndex > 0) {
                currentPageIndex--;
                loadPage(currentPageIndex);
            }
        }

        /** ì „ì²´ ê²°ê³¼ í‘œì‹œ */
        function showTotalResults() {
            quizContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');

            let totalScore = 0;
            for (const score of Object.values(pageScores)) {
                totalScore += score;
            }
            
            const percentage = Math.round((totalScore / totalQuestionsCount) * 100);

            totalQuestionsEl.textContent = totalQuestionsCount;
            totalScoreEl.textContent = totalScore;
            totalPercentageEl.textContent = percentage;

            let message = '';
            if (percentage === 100) {
                message = 'ì™„ë²½í•´ìš”! ì •ë§ ëŒ€ë‹¨í•©ë‹ˆë‹¤. ğŸ‘';
            } else if (percentage >= 70) {
                message = 'í›Œë¥­í•©ë‹ˆë‹¤! ì¡°ê¸ˆë§Œ ë” ë³µìŠµí•´ë´ìš”.';
            } else if (percentage >= 50) {
                message = 'ì˜í–ˆì–´ìš”! ë³µìŠµì´ ì¢€ ë” í•„ìš”í•˜ê² ë„¤ìš”.';
            } else {
                message = 'ì•„ì‰¬ìš´ ê²°ê³¼ë„¤ìš”. ë‹¤ì‹œ í•œ ë²ˆ ë„ì „í•´ë³´ì„¸ìš”!';
            }
            resultMessageEl.textContent = message;
        }

        /** í€´ì¦ˆ ë‹¤ì‹œ ì‹œì‘ */
        function restartQuiz() {
            currentPageIndex = 0;
            userAnswers = {};
            pageScores = {};

            resultContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            
            loadPage(0);
        }

        // ì´ˆê¸° í€´ì¦ˆ ë¡œë“œ
        document.addEventListener('DOMContentLoaded', () => loadPage(0));
    </script>
</body>
</html>
