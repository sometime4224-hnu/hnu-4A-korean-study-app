<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìê¸°ì†Œê°œì„œ êµ¬ì„±í•˜ê¸° ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            touch-action: manipulation;
        }
        .drop-zone {
            min-height: 100px;
            border: 2px dashed #cbd5e1;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .drop-zone.drag-over {
            background-color: #ecfccb; /* light green */
            border-color: #84cc16; /* green */
        }
        .draggable {
            cursor: grab;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .draggable.dragging {
            opacity: 0.5;
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .draggable.correct {
            cursor: not-allowed;
            background-color: #dcfce7; /* lighter green */
            border-color: #22c55e; /* green */
        }
        .drop-zone.correct-flash {
            animation: flash-green 0.5s ease;
        }
        .drop-zone.incorrect-flash {
            animation: flash-red 0.5s ease;
        }
        @keyframes flash-green {
            0% { background-color: #ecfccb; }
            100% { background-color: #ffffff; }
        }
        @keyframes flash-red {
            0% { background-color: #fee2e2; }
            100% { background-color: #ffffff; }
        }
    </style>
</head>
<body class="bg-slate-100 flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl mx-auto">
        <header class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-800">ìê¸°ì†Œê°œì„œ êµ¬ì„±í•˜ê¸° ê²Œì„</h1>
            <p class="text-slate-600 mt-2">ì•„ë˜ ë¬¸ì¥ë“¤ì„ ì•Œë§ì€ ìê¸°ì†Œê°œì„œ í•­ëª©ìœ¼ë¡œ ì˜®ê²¨ë³´ì„¸ìš”.</p>
        </header>

        <main class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg">
            <div class="flex flex-col lg:flex-row gap-6">
                <!-- ìê¸°ì†Œê°œì„œ í•­ëª© (Drop Zones) -->
                <div id="cover-letter-sections" class="w-full lg:w-1/2 space-y-4">
                    <!-- JSë¡œ ìƒì„± -->
                </div>

                <!-- ë¬¸ì¥ ëª©ë¡ (Draggable Items) -->
                <div class="w-full lg:w-1/2 p-4 bg-slate-50 rounded-lg">
                    <h3 class="font-bold text-lg text-slate-700 mb-3 text-center">ì—¬ê¸°ì— ìˆëŠ” ë¬¸ì¥ë“¤ì„ ì˜®ê²¨ë³´ì„¸ìš”!</h3>
                    <div id="sentence-pool" class="space-y-3">
                        <!-- JSë¡œ ìƒì„± -->
                    </div>
                </div>
            </div>
             <div class="text-center mt-6">
                <button id="reset-button" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                    ë‹¤ì‹œ ì‹œì‘
                </button>
            </div>
        </main>
    </div>

    <!-- ìŠ¹ë¦¬ ë©”ì‹œì§€ ëª¨ë‹¬ -->
    <div id="win-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-2xl p-8 text-center shadow-2xl transform scale-95 transition-transform duration-300">
            <h2 class="text-3xl font-bold text-yellow-500 mb-2">ğŸ‰ ì™„ë²½í•´ìš”! ğŸ‰</h2>
            <p class="text-slate-700 text-lg mb-6">ìê¸°ì†Œê°œì„œì˜ êµ¬ì¡°ë¥¼ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ì…¨ë„¤ìš”!</p>
            <button id="play-again-button" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors text-lg shadow-lg">
                ìƒˆ ê²Œì„í•˜ê¸°
            </button>
        </div>
    </div>

    <script>
        const sectionsContainer = document.getElementById('cover-letter-sections');
        const sentencesContainer = document.getElementById('sentence-pool');
        const resetButton = document.getElementById('reset-button');
        const winModal = document.getElementById('win-modal');
        const playAgainButton = document.getElementById('play-again-button');

        const gameData = [
            {
                id: 1,
                question: "1. ìš°ë¦¬ í•™êµì™€ í•´ë‹¹ ì „ê³µì— ì§€ì›í•œ ë™ê¸°ê°€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
                title: "ì§€ì› ë™ê¸°",
                sentence: "ì €ëŠ” í•œêµ­ ë¬¸í™”ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ í•œêµ­ì–´ë¥¼ ë” ë°°ìš°ê³  ì‹¶ì–´ì„œ ì´ í•™êµì— ì§€ì›í–ˆìŠµë‹ˆë‹¤."
            },
            {
                id: 2,
                question: "2. ìš°ë¦¬ í•™êµì— ì í•©í•œ ì¸ì¬ê°€ ë˜ê¸° ìœ„í•´ ì–´ë– í•œ ë…¸ë ¥ê³¼ ì¤€ë¹„ë¥¼ í–ˆìŠµë‹ˆê¹Œ?",
                title: "ë…¸ë ¥ê³¼ ì¤€ë¹„",
                sentence: "ë§¤ì¼ í•œêµ­ ë“œë¼ë§ˆë¥¼ ë³´ê³  í•œêµ­ ì¹œêµ¬ì™€ ì´ì•¼ê¸°í•˜ë©´ì„œ í•œêµ­ì–´ ì‹¤ë ¥ì„ í‚¤ì› ìŠµë‹ˆë‹¤."
            },
            {
                id: 3,
                question: "3. ìš°ë¦¬ í•™êµì— ë‹¤ë‹ˆëŠ” ë™ì•ˆì˜ í•™ì—… ëª©í‘œëŠ” ë¬´ì—‡ì´ê³ , ê·¸ ëª©í‘œë¥¼ ì´ë£¨ê¸° ìœ„í•´ ì–´ë–»ê²Œ í•  ê²ƒì…ë‹ˆê¹Œ?",
                title: "í•™ì—… ê³„íš",
                sentence: "í•™êµì— ì…í•™í•´ì„œëŠ” ì½ê¸°ì™€ ì“°ê¸° ìˆ˜ì—…ì„ ì—´ì‹¬íˆ ë“£ê³ , í•™êµ ë™ì•„ë¦¬ í™œë™ì—ë„ ì°¸ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤."
            },
            {
                id: 4,
                question: "4. ìš°ë¦¬ í•™êµë¥¼ ì¡¸ì—…í•œ ì´í›„ì˜ ê³„íšì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
                title: "ì¡¸ì—… í›„ ê³„íš",
                sentence: "í•™êµë¥¼ ì¡¸ì—…í•œ í›„ì— í•œêµ­ íšŒì‚¬ì— ì·¨ì§í•´ì„œ í•œêµ­ì—ì„œ ê³„ì† ì‚´ê³  ì‹¶ìŠµë‹ˆë‹¤."
            }
        ];
        
        let correctPlacements = 0;

        function initializeGame() {
            correctPlacements = 0;
            sectionsContainer.innerHTML = '';
            sentencesContainer.innerHTML = '';
            winModal.classList.add('hidden');
            winModal.firstElementChild.classList.remove('scale-100');
            winModal.firstElementChild.classList.add('scale-95');

            // ì„¹ì…˜(ë“œë¡­ ì¡´) ìƒì„±
            gameData.forEach(item => {
                const sectionEl = document.createElement('div');
                sectionEl.classList.add('p-4', 'rounded-lg', 'bg-white', 'border', 'border-slate-200');
                sectionEl.innerHTML = `
                    <h3 class="font-bold text-slate-800">${item.question}</h3>
                    <p class="text-sm text-blue-600 font-semibold mb-2">[${item.title}]</p>
                    <div class="drop-zone p-2 rounded-md" data-id="${item.id}"></div>
                `;
                sectionsContainer.appendChild(sectionEl);
            });
            
            // ë¬¸ì¥(ë“œë˜ê·¸ ì•„ì´í…œ) ìƒì„± ë° ì„ê¸°
            const shuffledSentences = [...gameData].sort(() => Math.random() - 0.5);
            shuffledSentences.forEach(item => {
                const sentenceEl = document.createElement('div');
                sentenceEl.classList.add('draggable', 'p-3', 'bg-white', 'rounded-lg', 'border', 'border-slate-300', 'shadow-sm');
                sentenceEl.setAttribute('draggable', true);
                sentenceEl.dataset.id = item.id;
                sentenceEl.textContent = item.sentence;
                sentencesContainer.appendChild(sentenceEl);
            });

            addEventListeners();
        }

        function addEventListeners() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    if (!draggable.classList.contains('correct')) {
                        draggable.classList.add('dragging');
                    }
                });

                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', e => {
                    e.preventDefault();
                    if (!zone.hasChildNodes()){
                       zone.classList.add('drag-over');
                    }
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });

                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    if (zone.hasChildNodes()) return; // ì´ë¯¸ ì±„ì›Œì ¸ ìˆìœ¼ë©´ ë“œë¡­ ë°©ì§€

                    const draggedId = document.querySelector('.dragging')?.dataset.id;
                    if (!draggedId) return;
                    
                    const draggedEl = document.querySelector('.dragging');
                    const targetId = zone.dataset.id;
                    
                    if (draggedId === targetId) {
                        // ì •ë‹µ
                        zone.appendChild(draggedEl);
                        draggedEl.classList.remove('dragging');
                        draggedEl.classList.add('correct');
                        draggedEl.setAttribute('draggable', false);
                        zone.classList.add('correct-flash');
                        setTimeout(() => zone.classList.remove('correct-flash'), 500);
                        correctPlacements++;
                        checkForWin();
                    } else {
                        // ì˜¤ë‹µ
                        zone.classList.add('incorrect-flash');
                        setTimeout(() => zone.classList.remove('incorrect-flash'), 500);
                    }
                });
            });
        }
        
        function checkForWin() {
            if (correctPlacements === gameData.length) {
                setTimeout(() => {
                    winModal.classList.remove('hidden');
                     setTimeout(() => {
                        winModal.firstElementChild.classList.add('scale-100');
                    }, 10);
                }, 500);
            }
        }

        resetButton.addEventListener('click', initializeGame);
        playAgainButton.addEventListener('click', initializeGame);

        document.addEventListener('DOMContentLoaded', initializeGame);
    </script>
</body>
</html>

